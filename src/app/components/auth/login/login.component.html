<div class="login-container">
	<div class="login-card">
		<mat-card>
			<mat-card-header>
				<mat-card-title>
					<div class="login-header">
						<mat-icon class="login-icon">account_circle</mat-icon>
						<h2>Accedi</h2>
					</div>
				</mat-card-title>
			</mat-card-header>

			<mat-card-content>
				<form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
					<!-- Campo Username -->
					<mat-form-field appearance="outline" class="full-width">
						<mat-label>Username</mat-label>
						<input matInput formControlName="username" type="text"
							[class.mat-form-field-invalid]="username?.invalid && username?.touched">
						<mat-icon matSuffix>person</mat-icon>

						<mat-error *ngIf="username?.errors?.['required'] && username?.touched">
							Username è obbligatorio
						</mat-error>
					</mat-form-field>

					<!-- Campo Password -->
					<mat-form-field appearance="outline" class="full-width">
						<mat-label>Password</mat-label>
						<input matInput formControlName="password" [type]="hidePassword ? 'password' : 'text'"
							[class.mat-form-field-invalid]="password?.invalid && password?.touched">

						<button mat-icon-button matSuffix type="button" (click)="hidePassword = !hidePassword"
							[attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
							<mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
						</button>

						<mat-error *ngIf="password?.errors?.['required'] && password?.touched">
							Password è obbligatoria
						</mat-error>
						<mat-error *ngIf="password?.errors?.['minlength'] && password?.touched">
							Password deve essere di almeno 6 caratteri
						</mat-error>
					</mat-form-field>

					<!-- Pulsante Login -->
					<div class="login-actions">
						<button mat-raised-button color="primary" type="submit" [disabled]="loginForm.invalid || isLoading"
							class="login-button full-width">

							<mat-spinner *ngIf="isLoading" diameter="20" class="login-spinner">
							</mat-spinner>

							<span *ngIf="!isLoading">Accedi</span>
							<span *ngIf="isLoading">Accesso in corso...</span>
						</button>
					</div>

					<!-- Link opzionali -->
					<div class="login-links">
						<a mat-button color="primary" routerLink="/forgot-password">
							Password dimenticata?
						</a>
					</div>
				</form>
			</mat-card-content>
		</mat-card>
	</div>
</div>